<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>RainterpreterExpressionDeployerNP</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../../favicon.svg">
        <link rel="shortcut icon" href="../../../favicon.png">
        <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
        <link rel="stylesheet" href="../../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../highlight.css">
        <link rel="stylesheet" href="../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../../book.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="../../../index.html">Home</a></li><li class="chapter-item affix "><li class="part-title">src</li><li class="chapter-item "><a href="../../../src/abstract/index.html">❱ abstract</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../src/abstract/DeployerDiscoverableMetaV1.sol/struct.DeployerDiscoverableMetaV1ConstructionConfig.html">DeployerDiscoverableMetaV1ConstructionConfig</a></li><li class="chapter-item "><a href="../../../src/abstract/DeployerDiscoverableMetaV1.sol/abstract.DeployerDiscoverableMetaV1.html">DeployerDiscoverableMetaV1</a></li></ol></li><li class="chapter-item expanded "><a href="../../../src/concrete/index.html">❱ concrete</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../src/concrete/RainterpreterExpressionDeployerNP.sol/error.UnexpectedPointers.html">UnexpectedPointers</a></li><li class="chapter-item "><a href="../../../src/concrete/RainterpreterExpressionDeployerNP.sol/error.UnexpectedInterpreterBytecodeHash.html">UnexpectedInterpreterBytecodeHash</a></li><li class="chapter-item "><a href="../../../src/concrete/RainterpreterExpressionDeployerNP.sol/error.MissingEntrypoint.html">MissingEntrypoint</a></li><li class="chapter-item "><a href="../../../src/concrete/RainterpreterExpressionDeployerNP.sol/error.UnexpectedStoreBytecodeHash.html">UnexpectedStoreBytecodeHash</a></li><li class="chapter-item "><a href="../../../src/concrete/RainterpreterExpressionDeployerNP.sol/error.UnexpectedOpMetaHash.html">UnexpectedOpMetaHash</a></li><li class="chapter-item "><a href="../../../src/concrete/RainterpreterExpressionDeployerNP.sol/error.NegativeStackIndex.html">NegativeStackIndex</a></li><li class="chapter-item "><a href="../../../src/concrete/RainterpreterExpressionDeployerNP.sol/struct.RainterpreterExpressionDeployerConstructionConfig.html">RainterpreterExpressionDeployerConstructionConfig</a></li><li class="chapter-item expanded "><a href="../../../src/concrete/RainterpreterExpressionDeployerNP.sol/contract.RainterpreterExpressionDeployerNP.html" class="active">RainterpreterExpressionDeployerNP</a></li><li class="chapter-item "><a href="../../../src/concrete/RainterpreterExpressionDeployerNP.sol/constants.RainterpreterExpressionDeployerNP.html">RainterpreterExpressionDeployerNP constants</a></li><li class="chapter-item "><a href="../../../src/concrete/RainterpreterExtern.sol/error.BadInputs.html">BadInputs</a></li><li class="chapter-item "><a href="../../../src/concrete/RainterpreterExtern.sol/error.UnknownOp.html">UnknownOp</a></li><li class="chapter-item "><a href="../../../src/concrete/RainterpreterExtern.sol/contract.RainterpreterExtern.html">RainterpreterExtern</a></li><li class="chapter-item "><a href="../../../src/concrete/RainterpreterNP.sol/error.NegativeStackLength.html">NegativeStackLength</a></li><li class="chapter-item "><a href="../../../src/concrete/RainterpreterNP.sol/contract.RainterpreterNP.html">RainterpreterNP</a></li><li class="chapter-item "><a href="../../../src/concrete/RainterpreterStore.sol/error.RainterpreterStoreOddSetLength.html">RainterpreterStoreOddSetLength</a></li><li class="chapter-item "><a href="../../../src/concrete/RainterpreterStore.sol/contract.RainterpreterStore.html">RainterpreterStore</a></li></ol></li><li class="chapter-item "><a href="../../../src/interface/index.html">❱ interface</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../src/interface/deprecated/index.html">❱ deprecated</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../src/interface/deprecated/IInterpreterCallerV1.sol/struct.SignedContext.html">SignedContext</a></li><li class="chapter-item "><a href="../../../src/interface/deprecated/IInterpreterCallerV1.sol/interface.IInterpreterCallerV1.html">IInterpreterCallerV1</a></li><li class="chapter-item "><a href="../../../src/interface/deprecated/IInterpreterCallerV1.sol/constants.IInterpreterCallerV1.html">IInterpreterCallerV1 constants</a></li></ol></li><li class="chapter-item "><a href="../../../src/interface/unstable/index.html">❱ unstable</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../src/interface/unstable/IDebugExpressionDeployerV1.sol/interface.IDebugExpressionDeployerV1.html">IDebugExpressionDeployerV1</a></li><li class="chapter-item "><a href="../../../src/interface/unstable/IDebugInterpreterV1.sol/interface.IDebugInterpreterV1.html">IDebugInterpreterV1</a></li><li class="chapter-item "><a href="../../../src/interface/unstable/IExpressionDeployerV2.sol/interface.IExpressionDeployerV2.html">IExpressionDeployerV2</a></li><li class="chapter-item "><a href="../../../src/interface/unstable/IExpressionDeployerV2.sol/constants.IExpressionDeployerV2.html">IExpressionDeployerV2 constants</a></li><li class="chapter-item "><a href="../../../src/interface/unstable/IParserV1.sol/interface.IParserV1.html">IParserV1</a></li></ol></li><li class="chapter-item "><a href="../../../src/interface/IExpressionDeployerV1.sol/interface.IExpressionDeployerV1.html">IExpressionDeployerV1</a></li><li class="chapter-item "><a href="../../../src/interface/IExpressionDeployerV1.sol/constants.IExpressionDeployerV1.html">IExpressionDeployerV1 constants</a></li><li class="chapter-item "><a href="../../../src/interface/IInterpreterCallerV2.sol/struct.SignedContextV1.html">SignedContextV1</a></li><li class="chapter-item "><a href="../../../src/interface/IInterpreterCallerV2.sol/interface.IInterpreterCallerV2.html">IInterpreterCallerV2</a></li><li class="chapter-item "><a href="../../../src/interface/IInterpreterCallerV2.sol/constants.IInterpreterCallerV2.html">IInterpreterCallerV2 constants</a></li><li class="chapter-item "><a href="../../../src/interface/IInterpreterExternV1.sol/type.EncodedExternDispatch.html">EncodedExternDispatch</a></li><li class="chapter-item "><a href="../../../src/interface/IInterpreterExternV1.sol/type.ExternDispatch.html">ExternDispatch</a></li><li class="chapter-item "><a href="../../../src/interface/IInterpreterExternV1.sol/interface.IInterpreterExternV1.html">IInterpreterExternV1</a></li><li class="chapter-item "><a href="../../../src/interface/IInterpreterStoreV1.sol/type.FullyQualifiedNamespace.html">FullyQualifiedNamespace</a></li><li class="chapter-item "><a href="../../../src/interface/IInterpreterStoreV1.sol/interface.IInterpreterStoreV1.html">IInterpreterStoreV1</a></li><li class="chapter-item "><a href="../../../src/interface/IInterpreterStoreV1.sol/constants.IInterpreterStoreV1.html">IInterpreterStoreV1 constants</a></li><li class="chapter-item "><a href="../../../src/interface/IInterpreterV1.sol/type.SourceIndex.html">SourceIndex</a></li><li class="chapter-item "><a href="../../../src/interface/IInterpreterV1.sol/type.EncodedDispatch.html">EncodedDispatch</a></li><li class="chapter-item "><a href="../../../src/interface/IInterpreterV1.sol/type.StateNamespace.html">StateNamespace</a></li><li class="chapter-item "><a href="../../../src/interface/IInterpreterV1.sol/type.Operand.html">Operand</a></li><li class="chapter-item "><a href="../../../src/interface/IInterpreterV1.sol/interface.IInterpreterV1.html">IInterpreterV1</a></li><li class="chapter-item "><a href="../../../src/interface/IInterpreterV1.sol/constants.IInterpreterV1.html">IInterpreterV1 constants</a></li></ol></li><li class="chapter-item "><a href="../../../src/lib/index.html">❱ lib</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../src/lib/caller/index.html">❱ caller</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../src/lib/caller/LibContext.sol/error.InvalidSignature.html">InvalidSignature</a></li><li class="chapter-item "><a href="../../../src/lib/caller/LibContext.sol/library.LibContext.html">LibContext</a></li><li class="chapter-item "><a href="../../../src/lib/caller/LibDeployerDiscoverable.sol/library.LibDeployerDiscoverable.html">LibDeployerDiscoverable</a></li><li class="chapter-item "><a href="../../../src/lib/caller/LibEncodedDispatch.sol/library.LibEncodedDispatch.html">LibEncodedDispatch</a></li><li class="chapter-item "><a href="../../../src/lib/caller/LibEvaluable.sol/struct.EvaluableConfig.html">EvaluableConfig</a></li><li class="chapter-item "><a href="../../../src/lib/caller/LibEvaluable.sol/struct.Evaluable.html">Evaluable</a></li><li class="chapter-item "><a href="../../../src/lib/caller/LibEvaluable.sol/library.LibEvaluable.html">LibEvaluable</a></li></ol></li><li class="chapter-item "><a href="../../../src/lib/compile/index.html">❱ compile</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../src/lib/compile/LibCompile.sol/library.LibCompile.html">LibCompile</a></li></ol></li><li class="chapter-item "><a href="../../../src/lib/eval/index.html">❱ eval</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../src/lib/eval/LibEval.sol/library.LibEval.html">LibEval</a></li></ol></li><li class="chapter-item "><a href="../../../src/lib/extern/index.html">❱ extern</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../src/lib/extern/LibExtern.sol/library.LibExtern.html">LibExtern</a></li></ol></li><li class="chapter-item "><a href="../../../src/lib/integrity/index.html">❱ integrity</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../src/lib/integrity/LibIntegrityCheck.sol/error.MinStackBottom.html">MinStackBottom</a></li><li class="chapter-item "><a href="../../../src/lib/integrity/LibIntegrityCheck.sol/error.StackPopUnderflow.html">StackPopUnderflow</a></li><li class="chapter-item "><a href="../../../src/lib/integrity/LibIntegrityCheck.sol/error.MinFinalStack.html">MinFinalStack</a></li><li class="chapter-item "><a href="../../../src/lib/integrity/LibIntegrityCheck.sol/struct.IntegrityCheckState.html">IntegrityCheckState</a></li><li class="chapter-item "><a href="../../../src/lib/integrity/LibIntegrityCheck.sol/library.LibIntegrityCheck.html">LibIntegrityCheck</a></li><li class="chapter-item "><a href="../../../src/lib/integrity/LibIntegrityCheck.sol/constants.LibIntegrityCheck.html">LibIntegrityCheck constants</a></li></ol></li><li class="chapter-item "><a href="../../../src/lib/ns/index.html">❱ ns</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../src/lib/ns/LibNamespace.sol/library.LibNamespace.html">LibNamespace</a></li></ol></li><li class="chapter-item "><a href="../../../src/lib/op/index.html">❱ op</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../src/lib/op/chainlink/index.html">❱ chainlink</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../src/lib/op/chainlink/LibOpChainlinkOraclePrice.sol/library.LibOpChainlinkOraclePrice.html">LibOpChainlinkOraclePrice</a></li></ol></li><li class="chapter-item "><a href="../../../src/lib/op/evm/index.html">❱ evm</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../src/lib/op/evm/LibOpChainId.sol/library.LibOpChainId.html">LibOpChainId</a></li></ol></li><li class="chapter-item "><a href="../../../src/lib/op/LibAllStandardOpsNP.sol/error.BadDynamicLength.html">BadDynamicLength</a></li><li class="chapter-item "><a href="../../../src/lib/op/LibAllStandardOpsNP.sol/library.LibAllStandardOpsNP.html">LibAllStandardOpsNP</a></li><li class="chapter-item "><a href="../../../src/lib/op/LibAllStandardOpsNP.sol/constants.LibAllStandardOpsNP.html">LibAllStandardOpsNP constants</a></li><li class="chapter-item "><a href="../../../src/lib/op/LibOp.sol/error.UnexpectedResultLength.html">UnexpectedResultLength</a></li><li class="chapter-item "><a href="../../../src/lib/op/LibOp.sol/library.LibOp.html">LibOp</a></li></ol></li><li class="chapter-item "><a href="../../../src/lib/parse/index.html">❱ parse</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../src/lib/parse/LibCtPop.sol/library.LibCtPop.html">LibCtPop</a></li><li class="chapter-item "><a href="../../../src/lib/parse/LibCtPop.sol/constants.LibCtPop.html">LibCtPop constants</a></li><li class="chapter-item "><a href="../../../src/lib/parse/LibParse.sol/error.MissingFinalSemi.html">MissingFinalSemi</a></li><li class="chapter-item "><a href="../../../src/lib/parse/LibParse.sol/error.UnexpectedLHSChar.html">UnexpectedLHSChar</a></li><li class="chapter-item "><a href="../../../src/lib/parse/LibParse.sol/error.UnexpectedRHSChar.html">UnexpectedRHSChar</a></li><li class="chapter-item "><a href="../../../src/lib/parse/LibParse.sol/error.UnexpectedRightParen.html">UnexpectedRightParen</a></li><li class="chapter-item "><a href="../../../src/lib/parse/LibParse.sol/error.WordSize.html">WordSize</a></li><li class="chapter-item "><a href="../../../src/lib/parse/LibParse.sol/error.UnknownWord.html">UnknownWord</a></li><li class="chapter-item "><a href="../../../src/lib/parse/LibParse.sol/error.MaxSources.html">MaxSources</a></li><li class="chapter-item "><a href="../../../src/lib/parse/LibParse.sol/error.DanglingSource.html">DanglingSource</a></li><li class="chapter-item "><a href="../../../src/lib/parse/LibParse.sol/error.StackOverflow.html">StackOverflow</a></li><li class="chapter-item "><a href="../../../src/lib/parse/LibParse.sol/struct.ParseState.html">ParseState</a></li><li class="chapter-item "><a href="../../../src/lib/parse/LibParse.sol/library.LibParseState.html">LibParseState</a></li><li class="chapter-item "><a href="../../../src/lib/parse/LibParse.sol/library.LibParse.html">LibParse</a></li><li class="chapter-item "><a href="../../../src/lib/parse/LibParse.sol/constants.LibParse.html">LibParse constants</a></li><li class="chapter-item "><a href="../../../src/lib/parse/LibParseMeta.sol/error.DuplicateFingerprint.html">DuplicateFingerprint</a></li><li class="chapter-item "><a href="../../../src/lib/parse/LibParseMeta.sol/library.LibParseMeta.html">LibParseMeta</a></li><li class="chapter-item "><a href="../../../src/lib/parse/LibParseMeta.sol/constants.LibParseMeta.html">LibParseMeta constants</a></li></ol></li><li class="chapter-item "><a href="../../../src/lib/state/index.html">❱ state</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../src/lib/state/LibInterpreterState.sol/struct.InterpreterState.html">InterpreterState</a></li><li class="chapter-item "><a href="../../../src/lib/state/LibInterpreterState.sol/library.LibInterpreterState.html">LibInterpreterState</a></li><li class="chapter-item "><a href="../../../src/lib/state/LibInterpreterStateDataContract.sol/library.LibInterpreterStateDataContract.html">LibInterpreterStateDataContract</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/rainprotocol/rain.interpreter" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="rainterpreterexpressiondeployernp"><a class="header" href="#rainterpreterexpressiondeployernp">RainterpreterExpressionDeployerNP</a></h1>
<p><a href="https://github.com/rainprotocol/rain.interpreter/blob/4f5440388936d20366b4ae49ee1cae147c07bed8/src/concrete/RainterpreterExpressionDeployerNP.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="/src/interface/unstable/IExpressionDeployerV2.sol/interface.IExpressionDeployerV2.html">IExpressionDeployerV2</a>, <a href="/src/interface/unstable/IDebugExpressionDeployerV1.sol/interface.IDebugExpressionDeployerV1.html">IDebugExpressionDeployerV1</a>, <a href="/src/interface/unstable/IParserV1.sol/interface.IParserV1.html">IParserV1</a>, ERC165</p>
<p>!!!EXPERIMENTAL!!! This is the deployer for the RainterpreterNP
interpreter. Notably includes onchain parsing/compiling of expressions from
Rainlang strings.</p>
<h2 id="state-variables"><a class="header" href="#state-variables">State Variables</a></h2>
<h3 id="iinterpreter"><a class="header" href="#iinterpreter">iInterpreter</a></h3>
<p>The interpreter with known bytecode that this deployer is constructed
for.</p>
<pre><code class="language-solidity">IInterpreterV1 public immutable iInterpreter;
</code></pre>
<h3 id="istore"><a class="header" href="#istore">iStore</a></h3>
<p>The store with known bytecode that this deployer is constructed for.</p>
<pre><code class="language-solidity">IInterpreterStoreV1 public immutable iStore;
</code></pre>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<h3 id="constructor"><a class="header" href="#constructor">constructor</a></h3>
<pre><code class="language-solidity">constructor(RainterpreterExpressionDeployerConstructionConfig memory config);
</code></pre>
<h3 id="supportsinterface"><a class="header" href="#supportsinterface">supportsInterface</a></h3>
<p>THIS IS NOT A SECURITY CHECK. IT IS AN INTEGRITY CHECK TO PREVENT
HONEST MISTAKES.
THIS IS NOT A SECURITY CHECK. IT IS AN INTEGRITY CHECK TO PREVENT
HONEST MISTAKES.
This IS a security check. This prevents someone making an exact
bytecode copy of the interpreter and shipping different meta for
the copy to lie about what each op does in the interpreter.</p>
<pre><code class="language-solidity">function supportsInterface(bytes4 interfaceId_) public view virtual override returns (bool);
</code></pre>
<h3 id="offchaindebugeval"><a class="header" href="#offchaindebugeval">offchainDebugEval</a></h3>
<pre><code class="language-solidity">function offchainDebugEval(
    bytes[] memory sources,
    uint256[] memory constants,
    FullyQualifiedNamespace namespace,
    uint256[][] memory context,
    SourceIndex sourceIndex,
    uint256[] memory initialStack,
    uint8 minOutputs
) external view returns (uint256[] memory, uint256[] memory);
</code></pre>
<h3 id="parse"><a class="header" href="#parse">parse</a></h3>
<pre><code class="language-solidity">function parse(bytes memory data) external pure returns (bytes[] memory, uint256[] memory);
</code></pre>
<h3 id="deployexpression"><a class="header" href="#deployexpression">deployExpression</a></h3>
<p>Expressions are expected to be deployed onchain as immutable contract
code with a first class address like any other contract or account.
Technically this is optional in the sense that all the tools required to
eval some expression and define all its opcodes are available as
libraries.
In practise there are enough advantages to deploying the sources directly
onchain as contract data and loading them from the interpreter at eval:</p>
<ul>
<li>Loading and storing binary data is gas efficient as immutable contract
data</li>
<li>Expressions need to be immutable between their deploy time integrity
check and runtime evaluation</li>
<li>Passing the address of an expression through calldata to an interpreter
is cheaper than passing an entire expression through calldata</li>
<li>Conceptually a very simple approach, even if implementations like
SSTORE2 are subtle under the hood
The expression deployer MUST perform an integrity check of the source
code before it puts the expression onchain at a known address. The
integrity check MUST at a minimum (it is free to do additional static
analysis) calculate the memory required to be allocated for the stack in
total, and that no out of bounds memory reads/writes occur within this
stack. A simple example of an invalid source would be one that pushes one
value to the stack then attempts to pops two values, clearly we cannot
remove more values than we added. The <code>IExpressionDeployerV2</code> MUST revert
in the case of any integrity failure, all integrity checks MUST pass in
order for the deployment to complete.
Once the integrity check is complete the <code>IExpressionDeployerV2</code> MUST do
any additional processing required by its paired interpreter.
For example, the <code>IExpressionDeployerV2</code> MAY NEED to replace the indexed
opcodes in the <code>ExpressionConfig</code> sources with real function pointers
from the corresponding interpreter.</li>
</ul>
<pre><code class="language-solidity">function deployExpression(bytes[] memory sources, uint256[] memory constants, uint8[] memory minOutputs)
    external
    returns (IInterpreterV1, IInterpreterStoreV1, address);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>sources</code></td><td><code>bytes[]</code></td><td>Sources verbatim. These sources MUST be provided in their sequential/index opcode form as the deployment process will need to index into BOTH the integrity check and the final runtime function pointers. This will be emitted in an event for offchain processing to use the indexed opcode sources. The first N sources are considered entrypoints and will be integrity checked by the expression deployer against a starting stack height of 0. Non-entrypoint sources MAY be provided for internal use such as the <code>call</code> opcode but will NOT be integrity checked UNLESS entered by an opcode in an entrypoint.</td></tr>
<tr><td><code>constants</code></td><td><code>uint256[]</code></td><td>Constants verbatim. Constants are provided alongside sources rather than inline as it allows us to avoid variable length opcodes and can be more memory efficient if the same constant is referenced several times from the sources.</td></tr>
<tr><td><code>minOutputs</code></td><td><code>uint8[]</code></td><td>The first N sources on the state config are entrypoints to the expression where N is the length of the <code>minOutputs</code> array. Each item in the <code>minOutputs</code> array specifies the number of outputs that MUST be present on the final stack for an evaluation of each entrypoint. The minimum output for some entrypoint MAY be zero if the expectation is that the expression only applies checks and error logic. Non-entrypoint sources MUST NOT have a minimum outputs length specified.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>IInterpreterV1</code></td><td>interpreter The interpreter the deployer believes it is qualified to perform integrity checks on behalf of.</td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>IInterpreterStoreV1</code></td><td>store The interpreter store the deployer believes is compatible with the interpreter.</td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>expression The address of the deployed onchain expression. MUST be valid according to all integrity checks the deployer is aware of.</td></tr>
</tbody></table>
</div>
<h3 id="integritycheck"><a class="header" href="#integritycheck">integrityCheck</a></h3>
<p>Drives an integrity check of the provided sources and constants. This</p>
<pre><code class="language-solidity">function integrityCheck(bytes[] memory sources, uint256[] memory constants, uint8[] memory minOutputs)
    internal
    view
    returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>sources</code></td><td><code>bytes[]</code></td><td>The sources to check.</td></tr>
<tr><td><code>constants</code></td><td><code>uint256[]</code></td><td>The constants to check.</td></tr>
<tr><td><code>minOutputs</code></td><td><code>uint8[]</code></td><td>The minimum number of outputs expected from each of the sources. Only applies to sources that are entrypoints. Internal sources have their integrity checked implicitly by the use of opcodes such as <code>call</code> that have min/max outputs in their operand.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The total stack size required to fully evaluate the expression. This is used to allocate the stack when deserializing the expression later so MUST be correct for ALL internal states of the evaluation. It is NOT sufficient to just return the final stack size as the stack grows and shrinks during evaluation.</td></tr>
</tbody></table>
</div>
<h3 id="integrityfunctionpointers"><a class="header" href="#integrityfunctionpointers">integrityFunctionPointers</a></h3>
<p>Defines all the function pointers to integrity checks. This is the
expression deployer's equivalent of the opcode function pointers and
follows a near identical dispatch process. These are never compiled into
source and are instead indexed into directly by the integrity check. The
indexing into integrity pointers (which has an out of bounds check) is a
proxy for enforcing that all opcode pointers exist at runtime, so the
length of the integrity pointers MUST match the length of opcode function
pointers. This function is <code>virtual</code> so that it can be overridden
pairwise with overrides to <code>functionPointers</code> on <code>Rainterpreter</code>.</p>
<pre><code class="language-solidity">function integrityFunctionPointers()
    internal
    view
    virtual
    returns (function(IntegrityCheckState memory, Operand, Pointer) view returns (Pointer)[] memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>function (IntegrityCheckState memory, Operand, Pointer) view returns (Pointer)[]</code></td><td>The list of integrity function pointers.</td></tr>
</tbody></table>
</div>
<h2 id="events"><a class="header" href="#events">Events</a></h2>
<h3 id="newexpression"><a class="header" href="#newexpression">NewExpression</a></h3>
<p>The config of the deployed expression including uncompiled sources. Will
only be emitted after the config passes the integrity check.</p>
<pre><code class="language-solidity">event NewExpression(address sender, bytes[] sources, uint256[] constants, uint8[] minOutputs);
</code></pre>
<h3 id="expressionaddress"><a class="header" href="#expressionaddress">ExpressionAddress</a></h3>
<p>The address of the deployed expression. Will only be emitted once the
expression can be loaded and deserialized into an evaluable interpreter
state.</p>
<pre><code class="language-solidity">event ExpressionAddress(address sender, address expression);
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../src/concrete/RainterpreterExpressionDeployerNP.sol/struct.RainterpreterExpressionDeployerConstructionConfig.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../../src/concrete/RainterpreterExpressionDeployerNP.sol/constants.RainterpreterExpressionDeployerNP.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../src/concrete/RainterpreterExpressionDeployerNP.sol/struct.RainterpreterExpressionDeployerConstructionConfig.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../../src/concrete/RainterpreterExpressionDeployerNP.sol/constants.RainterpreterExpressionDeployerNP.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../../elasticlunr.min.js"></script>
        <script src="../../../mark.min.js"></script>
        <script src="../../../searcher.js"></script>

        <script src="../../../clipboard.min.js"></script>
        <script src="../../../highlight.js"></script>
        <script src="../../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../../solidity.min.js"></script>


    </div>
    </body>
</html>
